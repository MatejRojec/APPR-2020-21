---
title: "Poročilo pri predmetu Analiza podatkov s programom R"
author: "Matej Rojec"
output:
  html_document: default
  pdf_document:
    includes:
      in_header: lib/styles.sty
    latex_engine: xelatex
runtime: shiny
---

```{r setup, echo=FALSE, results='hide', message=FALSE, warning=FALSE}
knitr::opts_chunk$set(
	echo = FALSE,
	message = FALSE,
	warning = FALSE
)
# Uvoz vseh potrebnih knjižnic
source("lib/libraries.r", encoding="UTF-8")

```

```{r rstudio, results='asis'}
# Izris povezave do RStudia na Binderju
source("lib/rstudio.r", encoding="UTF-8")
```

# Izbira teme

Analizirali bomo plače v ZDA skozi leta, analizirali bomo kateri poklici so najbolje in kateri najslabše plačani ter
ugotavljali katere zvezne države imajo najboljše pogoje za delavce in katere najslabše ter kako je to 
povezano z njihovim BDP. 
Na koncu bomo poskusili naraditi večjo makroekonomsko analizo vseh pridobljenih podatkov, 
da bi ugotovili dejansko stanje ZDA. 

Podatki so bili zbrani:
* iz Ameriškega statističnega urada ([U.S. BUREAU OF LABOR STATISTICS](http://www.bls.gov/bls/proghome.htm)) v CSV formatu. 
* Tabela o informacijah o BDP per capita zveznih držav pa je bila uvožena iz wikipedije:
 https://en.wikipedia.org/wiki/List_of_U.S._states_and_territories_by_GDP_per_capita

***

# Obdelava, uvoz in čiščenje podatkov

```{r uvoz}
source("uvoz/uvoz.r", encoding="UTF-8")
```


V drugi fazi smo tabele prečistili tako, da so v formatu *tidy data*.

Podatke imamo v tabelah:

Pri sklop podatkov se nanašajo na national data:

1. `kode` je razpredelnica z eno dimenzijo 
  - `occ_code` - spremenljivka: predstavlja kodo poklica (vsak poklic ima enolično določeno kodo poklica)
  - `occ_title`- meritev: naziv poklica, ki je odvisen od kode 

2. `t_e` je razpredelnica z dvema dimenzijama
  - `leto` - spremenljivka: leto meritve (od 2006 do 2019)
  - `occ_code` - spremenljivka: predstavlja kodo poklica 
  - `emp` - meritev: število zaposlenih delavcev
  
3. `nat.ha` je razpredelnica s tremi dimenzijami
  - `leto` - spremenljivka: leto meritve (od 2006 do 2019)
  - `occ_code` - spremenljivka: predstavlja kodo poklica 
  - `sredina` - spremenljivka: tip sredine (povprečje - mean, mediana - median)
  - `h` - meritev: urna postavka plač
  - `a` - meritev: letna meritev plač

Drugi sklop podatkov se nanašajo na state data:

1. `t_e_s` je razpredelnica s tremi dimenzijami
  - `leto` - spremenljivka: leto meritve (od 2006 do 2019)
  - `state` - spremenljivka: zvezne države ZDA
  - `occ_code` - spremenljivka: predstavlja kodo poklica 
  - `emp` - meritev: število zaposlenih delavcev

2. `st.ha` je razpredelnica s štirimi dimenzijami
  - `occ_code` - spremenljivka: predstavlja kodo poklica 
  - `leto` - spremenljivka: leto meritve (od 2006 do 2019)
  - `state` - spremenljivka: zvezne države ZDA
  - `sredina` - spremenljivka: tip sredine (povprečje - mean, mediana - median)
  - `h` - meritev: urna postavka plač
  - `a` - meritev: letna meritev plač  
  
Tretji podatki so pobrani iz Wikipedije:

1. `GDP_by_state` je razpredelnica z dvema dimenzijama
  - `State` - spremenljivka: zvezne države ZDA  
  - `leto` - spremenljivka: leto meritve (od 2006 do 2019)
  - `GDP` - meritev: BDP per capita 

***

# Vizualizacija podatkov

```{r vizualizacija, echo=FALSE, message=FALSE, warning=FALSE, results='hide'}
source("vizualizacija/vizualizacija.r", encoding="UTF-8")
```

Prvi graf prikazuje zaposlenost po letih v ZDA. Vidimo, da zaposlenost v ZDA v 
letnih narašča, kar nam, daje dober signal za gospodarstvo ... 
(diskusija še pride)

```{r graf1, echo=FALSE, fig.align='center'}
graf1
```


Graf prikazuje porazdelitec plač v ZDA za najboljše plačane tri poklice (po 
urni postavki). (diskusija še pride ...)

```{r graf2, echo=FALSE, fig.align='center'}
graf2
```


Graf prikazuje urne postavke plač najboljše plačenih poklicev v ZDA in kako se 
spreminjajo čez leta. (diskus. ...)

```{r graf3, echo=FALSE, fig.align='center'}
graf3
```

Graf prikazuje plače od dveh najslabše plačevnih poklicev.
... komentarji še pridejo


```{r graf4, echo=FALSE, fig.align='center'}
graf4
```

Graf prikazuje deleže poklicev t.j. boljše in slabše plačenih. 
... komentarji še pridejo

```{r graf5, echo=FALSE, fig.align='center'}
graf5
```

Zemljevidi: 


Povprečna plača po zveznih državah. komentraji: ...
```{r zem1, echo=FALSE, fig.align='center'}
zem1
```

***

# Analiza 
<!-- ````{r analiza, echo=FALSE, message=FALSE, warning=FALSE}
source("analiza/analiza.r", encoding = "UTF-8")
``` -->

# Shiny 

```{r shiny, echo=FALSE}
shinyAppDir("shiny", options=list(width="100%", height=600))
```



